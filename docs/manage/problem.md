# 题目管理

## 新建题目

![](https://arina.loli.net/2022/10/10/ArODH2mN6sTWBMZ.png)

具有新建题目权限的用户可以在题目列表页面的顶部找到「**添加新题**」按钮。点击该按钮即可在题库末尾新建一个名为「New Problem」的题目，新建的题目默认隐藏。题目一经创建**不可删除**。

## 题面管理

![](https://arina.loli.net/2022/10/10/e26ciuPpThYwzDS.png)

在非题目管理页面中，点击题目导航栏中的「**管理**」按钮（图中 1 处）即可进入题目的题面管理页面。

点击上方的选项卡（图中 2 处）可在题目管理页面中进行导航。

修改完标题（图中 3 处）、标签（图中 4 处）、题面（图中 5 处）后，可以点击编辑器的绿色按钮（或按键盘上的 Ctrl + S 键）保存，点击带眼睛的按钮可以预览渲染好的题面。

标签之间**必须以英文半角逗号**（`,`）进行分隔。

## 题目管理者管理

![](https://arina.loli.net/2022/10/10/NhQW3c5Yn2f7HKF.png)

如果该题的题目管理者将自己从管理者列表中移除，并且该用户没有全局的题目管理权限，则该用户无法再对此题进行管理。

仅超级管理员可以修改题目上传者。

## 题目数据管理

![](https://arina.loli.net/2022/10/10/j1MRKJZhpHTnDSI.png)

题目数据管理页面有三个主要板块：导航（图中 5）、子栏目、功能配置（图中 4）。

通过点击导航中的按钮，可以在不同的子栏目中查看到当前使用的配置文件、题目数据、额外数据（样例数据、Hack 数据）、比较器（checker）、验证器（validator）和标准程序（std）。

### 提交记录可视权限

![](https://arina.loli.net/2022/10/10/sQwpLzSlKgWGqfy.png)

|                    项目                     |                                     允许值                                     |
| :-----------------------------------------: | :----------------------------------------------------------------------------: |
|     查看提交文件（`view_content_type`）     |          所有人（`ALL`）、AC 后（`ALL_AFTER_AC`）、禁止查看（`NONE`）          |
| 查看全部详细信息（`view_all_details_type`） | 所有人（`ALL`）、AC 后（`ALL_AFTER_AC`）、仅自己（`SELF`）、禁止查看（`NONE`） |
|  查看测试点详细信息（`view_details_type`）  | 所有人（`ALL`）、AC 后（`ALL_AFTER_AC`）、仅自己（`SELF`）、禁止查看（`NONE`） |

### 题解权限

![](https://arina.loli.net/2022/10/10/LxE7QjtYwkpGbcg.png)

|                项目                |                            允许值                            |
| :--------------------------------: | :----------------------------------------------------------: |
|  查看题解（`view_solution_type`）  | 所有人（`ALL`）、AC 后（`ALL_AFTER_AC`）、禁止查看（`NONE`） |
| 提交题解（`submit_solution_type`） | 所有人（`ALL`）、AC 后（`ALL_AFTER_AC`）、禁止查看（`NONE`） |

### 上传数据

您可以在此处上传题目数据的压缩包。

### 试题配置

![](https://arina.loli.net/2022/10/10/vBj4PigKzfIX5Ft.png)

如果压缩包中没有添加 `problem.conf`，那么可以使用这个可视化界面来添加题目配置文件。

S2OJ 内置了以下几种比对函数可以在此界面选择：

- `ncmp`: 整数序列；
- `wcmp`: 字符串序列；
- `lcmp`: 多行数据（忽略行内与行末的多余空格，同时忽略文末回车）;
- `fcmp`: 多行数据（不忽略行末空格，但忽略文末回车）；
- `rcmp4`: 浮点数序列（误差不超过 1e-4）；
- `rcmp6`: 浮点数序列（误差不超过 1e-6）；
- `rcmp9`: 浮点数序列（误差不超过 1e-9）；
- `yesno`: Yes、No（不区分大小写）；
- `uncmp`: 整数集合；
- `bcmp`: 二进制文件。

如果需要使用自定义比较器，请在压缩包中添加 `chk.cpp` 并选择「自定义比较器」选项。

n_tests 表示测试点数量，必须为正整数。

如果不存在 Extra Test，请将 n_ex_tests 和 n_sample_tests 栏留空。

如果需要添加样例测试点，请将其命名为 `ex_{name}{id}.{suffix}`（name 根据类型为下方 input_pre 或 output_pre 中所填内容，id 为从 1 开始的自增序号，suffix 根据类型为下方 input_suf 或 output_suf 所填内容，最终文件名不带大括号）。详情请查看「[传题指引](./tutorial/upload_problem)」中的「样例测试点」一节。

input_pre 是输入文件名称的前缀，input_suf 是输入文件的扩展名。输出同理。

若将 n_tests 配置为 10、input_pre 配置为 `data`、input_suf 配置为 `in` ，则将会在压缩包中寻找 `data1.in`、`data2.in`、...、`data10.in`。

time_limit 的单位是秒，不能为小数，编辑时不带单位。

memory_limit 的单位是 MB，推荐值为 2 的整次幂（如 32、64、128、256、512、1024），编辑时不带单位。

配置完成后点击「确定」按钮保存，再点击「检验配置并同步数据」按钮同步数据。

### 检验配置并同步数据

上传了原始数据之后，你可以点击右侧的「**检验配置并同步数据**」按钮来让 S2OJ 对你上传的原始数据进行格式检查，并最终生成测评时使用的数据包。一般而言，这一步骤主要完成的是如下操作：

1. 检查原始数据中的输入输出文件里的换行符。如果是 `\r\n`，会被自动替换为 `\n`。多余的行末空格也会被替换掉。
2. 编译测评所需的文件，比如答案检查器（chk.cpp）、标准程序（std.cpp）、数据检验器（val.cpp），这些文件会在 C++14 标准下进行编译。
3. 将样例测试点（`ex_****.in/out` 等，需要配置 `n_sample_tests`）与 `download` 文件夹下的文件一起打包成压缩包，作为该题的附件供选手下载。

总之，你需要在上传数据之后点击「**检验配置并同步数据**」，检查是否有报错。顺利生成测评数据包之后，这道题的测评功能才会正常工作。

另外还要注意 Hack 功能的开关。初始时，题目是**不允许** Hack 的。但如果 Hack 功能处于开启状态，那么你只有在上传 `std.cpp` 和 `val.cpp` 后，「**检验配置并同步数据**」才会停止报错。但如果你不想写，或者暂时不打算写，那么你可以点击「**禁止使用 Hack**」的按钮来生成不带 Hack 功能的测评数据包。

### 难度系数

> 编者的话：不知道这个功能有谁在用……

难度系数可以是 [0, 10] 之间的实数。

## 传题指引

### 题面编写

目前 S2OJ 没有明确的题面规范要求，但建议按照一定的格式书写题面。

- 题面划分成多个明确的板块，可以参考洛谷、LibreOJ 等对格式要求较为严格的 OJ 的题面；
- 合理使用各级标题，避免滥用标题行导致题面阅读效果变差；
- 规范使用 LaTeX，比如对「Yes」「No」等文本使用 <code>\`</code> 包裹而不是使用 LaTeX；
- 题面中的图片请上传至 S2OJ 自带的 [图床](https://sjzezoj.com/image_hosting) 并添加水印以防失效，如果空间用完了可以找管理员续；
- 题面中支持一定量的 HTML 代码，但如果是从其他 OJ 上复制来的 HTML 代码，请使用 [转换工具](https://sjzezoj.com/html2markdown) 转换后再插入题面。

下面是一个题目模板，可以直接替换掉注释使用：

```markdown
## 题目背景

<!-- 可选，没有背景时请将标题一并删除 -->

## 题目描述

## 输入格式

## 输出格式

## 输入输出样例

### 输入样例 #1

<!-- 请将样例用代码块包裹起来 -->

### 输出样例 #1

<!-- 请将样例用代码块包裹起来 -->

### 样例解释 #1

<!--
后续添加样例时格式类似，如果声明大样例的话可以使用这种格式：

### 样例 #2

见右侧「附件下载」中的 `ex_add2.in/out`。

-->

## 数据范围与约定

<!-- 数据范围与一些其他提示 -->

<!--

如果题目是从其他地方搬来的，为了不破坏原题面可以在最后添加分割线后再添加搬题人的说明：


---

来自搬题人的提示：S2 的评测机太快了，所以不是正解也能通过现有数据，欢迎 Hack~


注意分割线的 `---` 与上一行文本间要留出至少一行的空行，否则会被识别为标题。

-->
```

### 标签配置

编辑题面页面可以添加标签。如有多个标签请以 **英文半角逗号** 隔开。建议写明题目出处、年份、算法等。

如给题目加上「模板题」标签，该题目将被自动加入「模板题库」中。

### 数据压缩包

该部分内容较多，请移步 [题目数据格式](/manage/tutorial/problem_data) 页面查看。

?> [uoj-data-converter](https://github.com/ouuan/uoj-data-converter/releases/tag/0.4.2) 可能会提升一些配置较为复杂的题目的配置效率。

### 样例测试点

如果题目配置了样例测试点，这些数据会与 `download` 文件夹中的内容一并打包进「题目附件」中供选手下载。

同时在 OI 赛制的比赛中会显示测样例的结果。

### 更新数据流程

1. 下载 `problem_{id}.zip` 并解压；
2. 对有问题的测试点/程序进行修改后重新打包；
3. 点击「**清空题目数据**」按钮清空原有数据；
4. 点击「**上传数据**」按钮上传新数据；
5. 点击「**检验配置并同步数据**」按钮同步新数据；
6. 如有需要，点击「**重测本题**」重新测评本题目的所有提交。
